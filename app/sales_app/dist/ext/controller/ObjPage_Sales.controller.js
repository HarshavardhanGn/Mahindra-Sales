sap.ui.define(["sap/ui/core/mvc/ControllerExtension"],function(e){"use strict";return e.extend("salesapp.ext.controller.ObjPage_Sales",{override:{onInit:function(){var e=this.base.getExtensionAPI().getModel()},routing:{onAfterBinding:async function(e){debugger;this.base.getView().mAggregations.content[0].mAggregations.sections[3].mAggregations._grid.mAggregations.content[0].mAggregations._grid.mAggregations.content[0].mAggregations.content.mAggregations.items[1].mAggregations._counter.bAllowTextSelection=false;var t=this.base.getView().getModel("ui").oData.isEditable;var s=this.base.getView().byId("salesapp::PurchaseEnquiryObjectPage--fe::CustomSubSection::Attach_File--uploadSet");var i=s.getBindingInfo("items");var n=i.template;s.setUploadButtonInvisible(true);n.setVisibleRemove(false);n.setVisibleEdit(false);s.setUploadEnabled(false);this.base.getView().getContent()[0].mAggregations.headerTitle.mAggregations._actionsToolbar.mAggregations.content[4].mProperties.text="Raise Quotation";let g="postattach";let o=e.getModel().bindContext(`/${g}(...)`);var a;var r=window.location.href;const c=/purchaseEnquiryUuid=([a-fA-F0-9-]+)/;const l=r.match(c);if(l){a=l[1];console.log(a)}debugger;var u=this.base.getExtensionAPI().getModel();var m;if(typeof u.getServiceUrl==="function"){m=u.getServiceUrl()}const A=await new Promise((e,t)=>{jQuery.ajax({url:m+"PurchaseEnquiry",method:"GET",dataType:"json",success:function(t){e(t)},error:function(e,s,i){t(new Error(s+": "+i))}})});var b;const d=A.value;d.forEach(e=>{if(e.purchaseEnquiryUuid===a){b=e.status}});if(b=="Request"||b=="In Process"||b=="Negotation"){this.base.getView().mAggregations.content[0].mAggregations.sections[4].setVisible(false);this.base.getView().mAggregations.content[0].mAggregations.sections[5].setVisible(false)}else if(b=="Approved"){this.base.getView().mAggregations.content[0].mAggregations.sections[0].setVisible(true);this.base.getView().mAggregations.content[0].mAggregations.sections[1].setVisible(true);this.base.getView().mAggregations.content[0].mAggregations.sections[2].setVisible(true);this.base.getView().mAggregations.content[0].mAggregations.sections[3].setVisible(true);this.base.getView().mAggregations.content[0].mAggregations.sections[4].setVisible(true);this.base.getView().mAggregations.content[0].mAggregations.sections[5].setVisible(true)}if(b=="In Process"||b=="Approved"){this.base.getView().getContent()[0].mAggregations.headerTitle.mAggregations._actionsToolbar.mAggregations.content[4].setEnabled(false)}else{this.base.getView().getContent()[0].mAggregations.headerTitle.mAggregations._actionsToolbar.mAggregations.content[4].setEnabled(true)}setTimeout(()=>{this.getView().findAggregatedObjects(true,function(e){return e.isA("sap.m.Button")}).forEach(function(e){if(e.getId().includes("Save")){e.setText("Send Quotation")}})},1e3)}}}})});
//# sourceMappingURL=ObjPage_Sales.controller.js.map