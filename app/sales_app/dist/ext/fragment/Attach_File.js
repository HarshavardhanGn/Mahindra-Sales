sap.ui.define(["sap/m/MessageToast"],function(e){"use strict";var t;var r=this;return{onAfterItemAdded:async function(e){debugger;var r=e.oSource.getModel().getServiceUrl();const a=/purchaseEnquiryUuid=([0-9a-fA-F-]{36})/;var i=window.location.href.match(a);debugger;var o=e.getParameter("item");var n=async function(e){var a={mediaType:e.getMediaType(),fileName:e.getFileName(),size:e.getFileObject().size,purchaseEnquiryUuid:i[1]};debugger;var o={url:r+`PurchaseEnquiry(purchaseEnquiryUuid=${i[1]},IsActiveEntity=false)/EnqToFile`,method:"POST",headers:{"Content-type":"application/json"},data:JSON.stringify(a)};await new Promise((e,r)=>{debugger;$.ajax(o).done((r,a,i)=>{debugger;t=r.ID;e(r)}).fail(e=>{r(e)})})};n(o).then(e=>{debugger;var a=r+`Files(ID=${t},IsActiveEntity=false)/content`;t=null;o.setUploadUrl(a);o.setUrl(a);var i=this.byId("uploadSet");i.setHttpRequestMethod("PUT");i.uploadItem(o)}).catch(e=>{debugger;console.log(e)});debugger},onUploadCompleted:function(e){debugger;var t=this.byId("uploadSet");t.removeAllIncompleteItems()},onOpenPressed:function(e){debugger;var t=e.oSource.getModel().getServiceUrl();let r=e.oSource.mProperties.url;var a=/Files.*$/;var i=r.match(a);if(i){var o=t+i[0]}e.oSource.mProperties.url=o},onAfterRemoved:function(e){var t=e.oSource.getModel().getServiceUrl();const r=/^(.*?),IsActiveEntity=/;let a=e.mParameters.item.mProperties.url.match(r);let i=a[1]+",IsActiveEntity=false)";i=i.replace(/^.*\/Files/,"/Files");$.ajax({url:t+i,method:"DELETE"})}}});
//# sourceMappingURL=Attach_File.js.map